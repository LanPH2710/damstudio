<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>S·ª± T√≠ch H·ªì G∆∞∆°m</title>
  <!-- <link rel="stylesheet" href="demo1.css" /> -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
  <style>
    html,
    body {
      margin: 0;
      padding: 0;
      height: 17500px;
      overflow-x: hidden;
      font-family: sans-serif;
    }

    #scene {
      position: relative;
      height: 100vh;
      width: 100%;
      overflow: hidden;
      background: #4D4D4D;
    }




    .title {
      position: absolute;
      top: 50%;
      left: 50%;
      translate: -50% -50%;
      font-size: 4rem;
      color: white;
      z-index: 10;
      text-align: center;
    }

    .scene1-element,
    .scene-element,
    .scene2-element,
    .scene3-element,
    .scene4-element,
    .scene5-element,
    .scene6-element,
    .scene7-element {
      position: absolute;
      left: 50%;
      top: 50%;
      translate: -50% -50%;
      opacity: 0;
      width: 100vw;
      height: 100vh;
      transform-origin: bottom center;
    }


    #floorText {
      position: absolute;
      bottom: 8%;
      left: 50%;
      transform: translateX(-50%);
      width: 90vw;
      text-align: center;
      color: white;
      font-size: 1.3rem;
      opacity: 0;
      z-index: 10;
    }

    #s2Text1,
    #s2Text2a,
    #s2Text2b,
    #s2Text3,
    #s3Text1,
    #s3Text2a,
    #s3Text2b,
    #s3Text3a,
    #s3Text3b,
    #s4Text1,
    #s4Text2,
    #s5Text,
    #s6Text,
    #s7Text1,
    #s7Text2a,
    #s7Text2b,
    #s7Text3 {
      position: absolute;
      color: white;
      font-size: 1.3rem;
      opacity: 0;
      z-index: 9;
    }

    #s2Text1,
    #s2Text2a {
      bottom: 10%;
      right: 5%;
      width: 40vw;
    }

    #s2Text2b {
      top: 2%;
      left: 2%;
    }

    #s2Text3 {
      bottom: 10%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 50vw;
      text-align: center;
    }

    #s3Text1 {
      top: 10%;
      left: 5%;
    }

    #s3Text2a {
      bottom: 10%;
      right: 5%;
      text-align: right;
      width: 40vw;
    }

    #s3Text2b {
      top: 10%;
      left: 5%;
    }

    #s3Text3a {
      top: 10%;
      left: 5%;
    }

    #s3Text3b {
      bottom: 5%;
      right: 5%;
      text-align: right;
      width: 40vw;
    }



    #s4Text1 {
      bottom: 5%;
      right: 5%;
    }

    #s4Text2 {
      top: 5%;
      left: 5%;
    }


    #s5Text {
      bottom: 5%;
      right: 5%;
      text-align: right;
      width: 40vw;
    }

    #s6Text {
      top: 5%;

    }

    #s7Text1 {
      top: 5%;
      left: 5%;
    }



    #s7Text2a {
      bottom: 5%;
      right: 5%;
      text-align: right;
      width: 40vw;
    }

    #s7Text2b {
      top: 5%;
      left: 5%;
    }

    #s7Text3 {
      bottom: 5%;
      right: 5%;
      text-align: right;
      width: 40vw;
    }

    /* ========================== SCENE 1 ========================== */
    #floor {
      z-index: 106;
    }

    #house1 {
      z-index: 105;
    }

    #enemy1 {
      z-index: 104;
    }

    #house2 {
      z-index: 103;
    }

    #enemy2 {
      z-index: 102;
    }

    #fire {
      z-index: 101;
    }

    #floorText {
      z-index: 110;
    }

    /* ========================== SCENE 2 ========================== */
    #s2cloud {
      z-index: 201;
    }

    #s2mountain2sd {
      z-index: 202;
    }

    #s2mountain1sd {
      z-index: 203;
    }

    #s2mountain2 {
      z-index: 204;
    }

    #s2mountain1 {
      z-index: 205;
    }

    #s2boatsd {
      z-index: 206;
    }

    #s2fisherman {
      z-index: 207;
    }

    #s2Text1,
    #s2Text2a,
    #s2Text2b,
    #s2Text3 {
      z-index: 210;
    }

    /* ========================== SCENE 3 ========================== */
    #s3tree2 {
      z-index: 301;
    }

    #s3enemy {
      z-index: 302;
    }

    #s3tree1 {
      z-index: 303;
    }

    #s3hero {
      z-index: 305;
    }

    #s3handstiff {
      z-index: 304;
    }

    #s3Text1,
    #s3Text2a,
    #s3Text2b,
    #s3Text3a,
    #s3Text3b {
      z-index: 310;
    }

    /* ========================== SCENE 4 ========================== */
    #s4sword {
      z-index: 404;
    }

    #s4hero {
      z-index: 403;
    }

    #s4men1 {
      z-index: 402;
    }

    #s4men2 {
      z-index: 401;
    }

    #s4Text1,
    #s4Text2 {
      z-index: 410;
    }

    /* ========================== SCENE 5 ========================== */
    #s5floor1 {
      z-index: 506;
    }

    #s5hero {
      z-index: 505;
    }

    #s5floor2 {
      z-index: 504;
    }

    #s5men1 {
      z-index: 503;
    }

    #s5men2 {
      z-index: 502;
    }

    #s5men3 {
      z-index: 501;
    }

    #s5Text {
      z-index: 510;
    }

    /* ========================== SCENE 6 ========================== */
    #s6people1 {
      z-index: 605;
    }

    #s6people2 {
      z-index: 604;
    }

    #s6hero {
      z-index: 603;
    }

    #s6sword {
      z-index: 602;
    }

    #s6people3 {
      z-index: 601;
    }

    #s6Text {
      z-index: 610;
    }

    /* ========================== SCENE 7 ========================== */
    #s7light {
      z-index: 705;
    }

    #s7turtle {
      z-index: 704;
    }

    #s7turtlesd {
      z-index: 703;
    }

    #s7boat {
      z-index: 702;
    }

    #s7boatsd {
      z-index: 701;
    }

    #s7Text1,
    #s7Text2a,
    #s7Text2b,
    #s7Text3 {
      z-index: 710;
    }

    #unlock-btn {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 9999;
      background: #222;
      color: white;
      padding: 8px 16px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
    }



    @media (max-width: 1000px) {
      .title {
        font-size: 2rem;
      }

      #floorText,
      #s2Text1,
      #s2Text2a,
      #s2Text2b,
      #s2Text3,
      #s3Text1,
      #s3Text2a,
      #s3Text2b,
      #s3Text3a,
      #s3Text3b,
      #s4Text1,
      #s4Text2,
      #s5Text,
      #s6Text,
      #s7Text1,
      #s7Text2a,
      #s7Text2b,
      #s7Text3 {
        font-size: 0.8rem;
      }
    }

    @media (max-width: 480px) {
      .title {
        font-size: 1.5rem;
      }

      #floorText,
      #s2Text1,
      #s2Text2a,
      #s2Text2b,
      #s2Text3,
      #s3Text1,
      #s3Text2a,
      #s3Text2b,
      #s3Text3a,
      #s3Text3b,
      #s4Text1,
      #s4Text2,
      #s5Text,
      #s6Text,
      #s7Text1,
      #s7Text2a,
      #s7Text2b,
      #s7Text3 {
        font-size: 0.4rem;
      }
    }

    #language-btn {
      position: fixed;
      top: 60px;
      right: 20px;
      z-index: 9999;
      background: #222;
      color: white;
      padding: 8px 16px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
    }

    #language-popup {
      position: fixed;
      top: 100px;
      right: 20px;
      background: white;
      border: 1px solid #ccc;
      padding: 10px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
      z-index: 999;
    }

    .lang-option {
      display: block;
      width: 100%;
      padding: 8px;
      text-align: left;
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
    }

    .lang-option:hover {
      background-color: #f0f0f0;
    }
  </style>
</head>

<body>

  <div id="rotate-warning" style="
  position: fixed;
  top: 0; left: 0;
  width: 100vw;
  height: 100vh;
  background: black;
  color: white;
  font-size: 1.5rem;
  display: none;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 2rem;
  z-index: 99999;
">
    Vui l√≤ng xoay ngang m√†n h√¨nh<br>(Rotate your phone for best experience)
  </div>

  <button id="unlock-btn">üîá </button>


  <!-- N√∫t m·ªü l·ª±a ch·ªçn ng√¥n ng·ªØ -->
  <button id="language-btn">üåê </button>

  <!-- C·ª≠a s·ªï ch·ªçn ng√¥n ng·ªØ -->
  <div id="language-popup" style="display: none;">
    <button class="lang-option" data-lang="vi">VN Ti·∫øng Vi·ªát</button>
    <button class="lang-option" data-lang="en">EN English</button>
    <button class="lang-option" data-lang="fr">FR Fran√ßais</button>
    <a href="http://">add-translations</a>
  </div>


  <section id="scene">

    <h1 class="title" id="title">S·ª± T√≠ch H·ªì G∆∞∆°m</h1>

    <img id="floor" src="images/floor.png" class="scene-element layer-floor" />
    <img id="house1" src="images/house1.png" class="scene-element layer-house1" />
    <img id="enemy1" src="images/enemy1.png" class="scene-element layer-enemy1" />
    <img id="house2" src="images/house2.png" class="scene-element layer-house2" />
    <img id="enemy2" src="images/enemy2.png" class="scene-element layer-enemy2" />
    <img id="fire" src="images/fire.png" class="scene-element layer-fire" />

    <div id="floorText">V√†o th·ªùi gi·∫∑c Minh x√¢m l∆∞·ª£c n∆∞·ªõc ta, ƒëi ƒë·∫øn ƒë√¢u ch√∫ng c≈©ng t√†n s√°t ng∆∞·ªùi d√¢n v√¥ t·ªôi, c∆∞·ªõp b√≥c
      c·ªßa c·∫£i c·ªßa
      nh√¢n d√¢n. <br>Cu·ªôc s·ªëng c·ªßa ng∆∞·ªùi d√¢n v√¥ c√πng c·ª±c kh·ªï, v√† l·∫ßm than.</div>

    <!-- Elements scene 2 -->
    <img id="s2cloud" src="SuTichHoGuom/Sence 2/1x/cloud.png" class="scene2-element" />
    <img id="s2mountain2sd" src="SuTichHoGuom/Sence 2/1x/mountain2shadow.png" class="scene2-element" />
    <img id="s2mountain2" src="SuTichHoGuom/Sence 2/1x/mountain2.png" class="scene2-element" />
    <img id="s2mountain1sd" src="SuTichHoGuom/Sence 2/1x/mountain1shadow.png" class="scene2-element" />
    <img id="s2mountain1" src="SuTichHoGuom/Sence 2/1x/mountain1.png" class="scene2-element" />
    <img id="s2boatsd" src="SuTichHoGuom/Sence 2/1x/boatshadow.png" class="scene2-element" />
    <img id="s2fisherman" src="SuTichHoGuom/Sence 2/1x/fisherman.png" class="scene2-element" />
    <!-- ƒêo·∫°n text scene2 -->
    <div id="s2Text1">H·ªìi ·∫•y ·ªü Thanh H√≥a, c√≥ m·ªôt ng∆∞·ªùi ƒëi ƒë√°nh c√° d∆∞·ªõi s√¥ng t√™n l√† L√™ Th·∫≠n, khi k√©o l√™n th·∫•y l∆∞·ªõi r·∫•t
      n·∫∑ng. Tuy nhi√™n khi l∆∞·ªõi ƒë∆∞·ª£c k√©o l√™n th√¨ kh√¥ng c√≥ m·ªôt con c√° n√†o m√† ch·ªâ l√† m·ªôt l∆∞·ª°i g∆∞∆°m c≈©.
    </div>

    <div id="s2Text2a">Anh b√®n quƒÉng l∆∞·ª°i g∆∞∆°m ƒëi xa h∆°n r·ªìi k√©o l∆∞·ªõi l·∫°i nh∆∞ng l·∫ßn 2, l·∫ßn 3 v·∫´n ch·ªâ c√≥ l∆∞·ª°i g∆∞∆°m n√†y
      m·∫Øc v√†o l∆∞·ªõi.
    </div>

    <div id="s2Text2b">Sao v·∫´n l√† l∆∞·ª°i g∆∞∆°m n√†y v·∫≠y??
    </div>

    <div id="s2Text3">Kh√¥ng b·∫Øt ƒë∆∞·ª£c c√°. anh ƒë√†nh c·∫ßm l∆∞·ª°i g∆∞∆°m c≈© mang v·ªÅ ƒë·ªÉ trong g√≥c nh√†. Sau ƒë√≥ kh√¥ng l√¢u L√™ Th·∫≠n
      gia nh·∫≠p nghƒ©a qu√¢n. ƒë∆∞·ª£c L√™ L·ª£i v√¥ c√πng tin t∆∞·ªüng.
    </div>


    <!-- Elements scene 3 -->
    <img id="s3tree2" src="SuTichHoGuom/sence 3/1x/tree2.png" class="scene3-element" />
    <img id="s3enemy" src="SuTichHoGuom/sence 3/1x/enemy.png" class="scene3-element" />
    <img id="s3tree1" src="SuTichHoGuom/sence 3/1x/tree1.png" class="scene3-element" />
    <img id="s3hero" src="SuTichHoGuom/sence 3/1x/LeLoi.png" class="scene3-element" />
    <img id="s3handstiff" src="SuTichHoGuom/sence 3/1x/handstiff.png" class="scene3-element" />
    <!-- ƒêo·∫°n text scene3 -->
    <div id="s3Text1">Th·ªùi gian sau, L√™ L·ª£i b·ªã qu√¢n gi·∫∑c ƒëu·ªïi theo v√†o trong r·ª´ng s√¢u.
    </div>

    <div id="s3Text2a">Khi ƒëang ch·∫°y tr·ªën, √¥ng nh√¨n th·∫•y c√≥ m·ªôt v·∫≠t s√°ng ch√≥i tr√™n c√†nh c√¢y.Nh√¨n kƒ© th√¨ th·∫•y m·ªôt c√°i
      chu√¥i g∆∞∆°m n·∫°m ng·ªçc s√°ng l·∫•p l√°nh.
    </div>

    <div id="s3Text2b">L√† chu√¥i g∆∞∆°m sao?
    </div>

    <div id="s3Text3a">Gh√©p v·ªõi l∆∞·ª°i g∆∞∆°m kia th·∫≠t gi·ªëng 1 b·ªô.
    </div>
    <div id="s3Text3b">L·∫°i nh·ªõ t·ªõi h√¥m ·ªü nh√† L√™ Th·∫≠n c√≥ l∆∞·ª°i g∆∞∆°m ph√°t s√°ng L√™ L·ª£i li·ªÅn c·∫ßm chu√¥i g∆∞∆°m v·ªÅ.
    </div>


    <!-- Elements scene 4 -->
    <img id="s4men2" src="SuTichHoGuom/scene 4/1x/men2.png" class="scene4-element" />
    <img id="s4men1" src="SuTichHoGuom/scene 4/1x/men1.png" class="scene4-element" />
    <img id="s4hero" src="SuTichHoGuom/scene 4/1x/LeLoi_1.png" class="scene4-element" />
    <img id="s4sword" src="SuTichHoGuom/scene 4/1x/sword.png" class="scene4-element" />
    <!-- ƒêo·∫°n text scene4 -->
    <div id="s4Text1">sau khi gh√©p l∆∞·ª°i g∆∞∆°m v·ªõi chu√¥i g∆∞∆°m th√¨ l·∫°i v·ª´a in nh∆∞ m·ªôt c·∫∑p, l∆∞·ª°i g∆∞∆°m tr·ªü l√™n s√°ng ch√≥i
      v√† s·∫Øc nh·ªçn v√¥ c√πng
    </div>

    <div id="s4Text2">C√≥ l·∫Ω ƒë√¢y l√† g∆∞∆°m b√°u tr·ªùi ban, gi√∫p nghƒ©a qu√¢n ƒë√°nh gi·∫∑c x√¢m l∆∞·ª£c
    </div>


    <!-- Elements scene 5 -->
    <img id="s5men3" src="SuTichHoGuom/scene 5/1x/men3.png" class="scene5-element" />
    <img id="s5men2" src="SuTichHoGuom/scene 5/1x/men2_1.png" class="scene5-element" />
    <img id="s5men1" src="SuTichHoGuom/scene 5/1x/men1_1.png" class="scene5-element" />
    <img id="s5floor2" src="SuTichHoGuom/scene 5/1x/floor2.png" class="scene5-element" />
    <img id="s5hero" src="SuTichHoGuom/scene 5/1x/LeLoi_2.png" class="scene5-element" />
    <img id="s5floor1" src="SuTichHoGuom/scene 5/1x/floor1.png" class="scene5-element" />
    <!-- ƒêo·∫°n text scene5 -->
    <div id="s5Text">K·ªÉ t·ª´ ƒë√≥, nghƒ©a qu√¢n ƒë√°nh ƒë√¢u th·∫Øng ƒë√≥, trƒÉm tr·∫≠n trƒÉm th·∫Øng. Ch·∫≥ng bao l√¢u sau, d∆∞·ªõi s·ª± l√£nh ƒë·∫°o
      c·ªßa L√™ L·ª£i v√† nh·ªù g∆∞∆°m th·∫ßn m√† nghƒ©a qu√¢n ƒë√£ ƒë√°nh b·∫°i qu√¢n Minh.
    </div>

    <!-- Elements scene 6 -->
    <img id="s6people3" src="SuTichHoGuom/scene 6/1x/people3.png" class="scene6-element" />
    <img id="s6sword" src="SuTichHoGuom/scene 6/1x/sword_1.png" class="scene6-element" />
    <img id="s6hero" src="SuTichHoGuom/scene 6/1x/LeLoi_3.png" class="scene6-element" />
    <img id="s6people2" src="SuTichHoGuom/scene 6/1x/people2.png" class="scene6-element" />
    <img id="s6people1" src="SuTichHoGuom/scene 6/1x/people1.png" class="scene6-element" />
    <!-- ƒêo·∫°n text scene6 -->
    <div id="s6Text">Gi·∫∑c s·ª£ h√£i b·ªè th√°o ch·∫°y v·ªÅ ph∆∞∆°ng B·∫Øc, mu√¥n d√¢n l·∫°i ƒë∆∞·ª£c th√°i b√¨nh, L√™ L·ª£i l√™n ng√¥i vua ƒë·ªÉ tr·ªã v√¨
      v√† th·ªëng nh·∫•t ƒë·∫•t n∆∞·ªõc
    </div>

    <!-- Elements scene 7 -->
    <img id="s7boatsd" src="SuTichHoGuom/scene 7/1x/boatshadow_1.png" class="scene7-element" />
    <img id="s7boat" src="SuTichHoGuom/scene 7/1x/boat.png" class="scene7-element" />
    <img id="s7turtlesd" src="SuTichHoGuom/scene 7/1x/turtleshadow.png" class="scene7-element" />
    <img id="s7turtle" src="SuTichHoGuom/scene 7/1x/turtle.png" class="scene7-element" />
    <img id="s7light" src="SuTichHoGuom/scene 7/1x/light.png" class="scene7-element" />
    <!-- ƒêo·∫°n text scene7 -->
    <div id="s7Text1">M·ªôt nƒÉm sau, khi nh√† vua c√πng c√°c b·ªÅ t√¥i th√¢n t√≠n ng·ªìi thuy·ªÅn ƒëi d·∫°o tr√™n h·ªì T·∫£ V·ªçng tr∆∞·ªõc kinh
      th√†nh.Khi thuy·ªÅn ra t·ªõi gi·ªØa h·ªì th√¨ b·∫•t ng·ªù t·ª´ d∆∞·ªõi l√†n n∆∞·ªõc trong xanh, c√≥ m·ªôt con r√πa v√†ng ngoi ƒë·∫ßu l√™n, c·∫•t
      ti·∫øng:
    </div>

    <div id="s7Text2a">Th∆∞a nh√† vua, l√∫c tr∆∞·ªõc ƒê·ª©c Long Qu√¢n c√≥ cho nh√† vua m∆∞·ª£n thanh g∆∞∆°m th·∫ßn ƒë·ªÉ ƒë√°nh gi·∫∑c
    </div>

    <div id="s7Text2b"> Nay nghi·ªáp l·ªõn ƒë√£ ho√†n th√†nh, xin nh√† vua h√£y tr·∫£ l·∫°i g∆∞∆°m th·∫ßn!

    </div>

    <div id="s7Text3">L√™ L·ª£i nghe xong, li·ªÅn c·ªüi thanh g∆∞∆°m b√™n m√¨nh ra, c·∫ßm hai tay v√† d√¢ng l√™n tr∆∞·ªõc m·∫∑t r√πa v√†ng.

    </div>
  </section>


  <!-- AUDIO -->
  <audio id="audio-intro" type="audio/mpeg" src="audio/voice_STHG/intro.mp3" preload="auto" playsinline></audio>
  <audio id="audio-scene1" type="audio/mpeg" src="audio/voice_STHG/s1.mp3" preload="auto" playsinline></audio>

  <!-- Scene 2 -->
  <audio id="audio-scene2p1" type="audio/mpeg" src="audio/voice_STHG/s2p1.mp3" preload="auto" playsinline></audio>
  <audio id="audio-scene2p2" type="audio/mpeg" src="audio/voice_STHG/s2p2.mp3" preload="auto" playsinline></audio>
  <audio id="audio-scene2p3" type="audio/mpeg" src="audio/voice_STHG/s2p3.mp3" preload="auto" playsinline></audio>

  <!-- Scene 3 -->
  <audio id="audio-scene3p1" type="audio/mpeg" src="audio/voice_STHG/s3p1.mp3" preload="auto" playsinline></audio>
  <audio id="audio-scene3p2" type="audio/mpeg" src="audio/voice_STHG/s3p2.mp3" preload="auto" playsinline></audio>
  <audio id="audio-scene3p3" type="audio/mpeg" src="audio/voice_STHG/s3p3.mp3" preload="auto" playsinline></audio>

  <!-- Scene 4‚Äì7 -->
  <audio id="audio-scene4" type="audio/mpeg" src="audio/voice_STHG/s4p1.mp3" preload="auto" playsinline></audio>
  <audio id="audio-scene5" type="audio/mpeg" src="audio/voice_STHG/s5.mp3" preload="auto" playsinline></audio>
  <audio id="audio-scene6" type="audio/mpeg" src="audio/voice_STHG/s6.mp3" preload="auto" playsinline></audio>
  <audio id="audio-scene7p1" type="audio/mpeg" src="audio/voice_STHG/s7p1.mp3" preload="auto" playsinline></audio>
  <audio id="audio-scene7p2" type="audio/mpeg" src="audio/voice_STHG/s7p2.mp3" preload="auto" playsinline></audio>
  <audio id="audio-ending" type="audio/mpeg" src="audio/voice_STHG/ending.mp3" preload="auto" playsinline></audio>

  <!-- <audio id="bg-music" src="audio/voice_STHG/bg-music.mp3" loop preload="auto" playsinline></audio> -->
  <audio id="bg-music" type="audio/mpeg" src="audio/voice_STHG/bg-music.mp3" preload="auto" loop></audio>


  <button id="autoScrollBtn" style="
  position: fixed;
  bottom: 20px;
  left: 20px;
  padding: 10px 16px;
  font-size: 14px;
  background-color: #ffffffcc;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  z-index: 9999;
">Auto</button>


  <script>
    gsap.registerPlugin(ScrollTrigger);


    //intro
    gsap.to(".title", {
      opacity: 0,
      y: -100,
      scrollTrigger: {
        trigger: "#scene",
        start: "top top",
        end: "top+=500",
        scrub: true
      }
    });

    //screen1 fade in
    gsap.to(["#fire", "#enemy2", "#house2", "#enemy1", "#house1", "#floor"], {
      opacity: 0,
      y: 100,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=1600",
        end: "top+=2500",
        scrub: true
      }
    });


    const elements = [
      { id: "floor", scale: 1.56 },
      { id: "house1", scale: 1.52 },
      { id: "enemy1", scale: 1.28 },
      { id: "house2", scale: 1.1 },
      { id: "enemy2", scale: 1.4 },
      { id: "fire", scale: 1.16 }
    ];

    // Step 1: Fade-in
    elements.forEach((el, i) => {
      gsap.fromTo(`#${el.id}`,
        { y: 100, opacity: 0 },
        {
          y: 0,
          opacity: 1,
          scrollTrigger: {
            trigger: "#scene",
            start: `top+=${400 + i * 150}`,
            end: `top+=${500 + i * 150}`,
            scrub: true
          }
        });
    });

    // Step 2: Zoom
    elements.forEach((el) => {
      gsap.fromTo(`#${el.id}`,
        { scale: 1, opacity: 1 },
        {
          scale: el.scale,
          opacity: 1,
          scrollTrigger: {
            trigger: "#scene",
            start: "top+=1400",
            end: "top+=2000",
            scrub: true
          }
        });
    });

    // Step 3: Fade out
    elements.forEach((el) => {
      gsap.to(`#${el.id}`, {
        opacity: 0,
        scrollTrigger: {
          trigger: "#scene",
          start: "top+=2000",
          end: "top+=2500",
          scrub: true
        }
      });
    });


    //screen1 text
    gsap.fromTo("#floorText", { y: 100, opacity: 0 }, {
      y: 0,
      opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=1400",
        end: "top+=2000",
        scrub: true
      }
    });

    gsap.to("#floorText", {
      y: 200,
      opacity: 0,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=2000",
        end: "top+=2500",
        scrub: true
      }
    });

    gsap.to(".scene1-element", {
      opacity: 0,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=2000",
        end: "top+=2500",
        scrub: true
      }
    });
    //-----------------------------------------------------------SCENE 2----------------------------------------------------------------
    //----------------------------------------------------------------------------------------------------------------------------------------------------------

    //screen2 fade in part1
    // Hi·ªáu ·ª©ng xu·∫•t hi·ªán ng∆∞·ªùi ƒë√°nh c√° v√† thuy·ªÅn (b∆∞·ªõc ƒë·∫ßu ti√™n)
    gsap.fromTo("#s2fisherman", { x: -500, opacity: 0 }, {
      x: 0,
      opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=2000",
        end: "top+=2750",
        scrub: true
      }
    });
    gsap.fromTo("#s2boatsd", { x: -500, opacity: 0 }, {
      x: 0,
      opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=2000",
        end: "top+=2750",
        scrub: true
      }
    });

    // N√∫i & m√¢y
    gsap.fromTo("#s2mountain1", { y: 50, opacity: 0 }, {
      y: 0,
      opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=2000",
        end: "top+=2750",
        scrub: true
      }
    });
    gsap.fromTo("#s2mountain2", { y: 50, opacity: 0 }, {
      y: 0,
      opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=2000",
        end: "top+=2750",
        scrub: true
      }
    });
    gsap.fromTo("#s2mountain1sd", { y: -50, opacity: 0 }, {
      y: 0,
      opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=2000",
        end: "top+=2750",
        scrub: true
      }
    });
    gsap.fromTo("#s2mountain2sd", { y: -50, opacity: 0 }, {
      y: 0,
      opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=2000",
        end: "top+=2750",
        scrub: true
      }
    });
    gsap.fromTo("#s2cloud", { opacity: 0 }, {
      opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=2000",
        end: "top+=2750",
        scrub: true
      }
    });

    // Text 1
    gsap.fromTo("#s2Text1", { y: 100, opacity: 0 }, {
      y: 0,
      opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=2000",
        end: "top+=3000",
        scrub: true
      }
    });
    // SCENE 2 CONTINUES
    gsap.fromTo("#s2Text1", { y: 0, opacity: 0 }, {
      y: 2000,
      opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=3000",
        end: "top+=3500",
        scrub: true
      }
    });

    // Text 2a
    gsap.fromTo("#s2Text2a", { y: 100, opacity: 0 }, {
      y: 0,
      opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=3000",
        end: "top+=3500",
        scrub: true
      }
    });

    // Text 2b
    gsap.fromTo("#s2Text2b", { opacity: 0 }, {
      opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=3500",
        end: "top+=4000",
        scrub: true
      }
    });

    // ·∫®n text 2a v√† 2b
    gsap.to("#s2Text2a", {
      y: 200,
      opacity: 0,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=4000",
        end: "top+=4500",
        scrub: true
      }
    });
    gsap.to("#s2Text2b", {
      y: -200,
      opacity: 0,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=4000",
        end: "top+=4500",
        scrub: true
      }
    });

    // Fisherman & boat ra kh·ªèi m√†n h√¨nh
    gsap.fromTo("#s2fisherman", { x: 0, opacity: 0 }, {
      x: -700,
      opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=4000",
        end: "top+=4500",
        scrub: true
      }
    });
    gsap.fromTo("#s2boatsd", { x: 0, opacity: 0 }, {
      x: -700,
      opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=4000",
        end: "top+=4500",
        scrub: true
      }
    });

    // Text 3
    gsap.fromTo("#s2Text3", { y: 100, opacity: 0 }, {
      y: 0,
      opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=4500",
        end: "top+=5000",
        scrub: true
      }
    });

    // Fade out to√†n b·ªô Scene 2
    gsap.to(".scene2-element, #s2Text1, #s2Text2a, #s2Text2b, #s2Text3", {
      opacity: 0,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=5000",
        end: "top+=5500",
        scrub: true
      }
    });

    //------------------------------------------------------------------------SCENE 3------------------------------------------------------------------------
    //----------------------------------------------------------------------------------------------------------------------------------------------------------
    // === SCENE 3 - PART 1: C√¢y, hero, enemy, text1 (5500 ‚Üí 6500) ===
    gsap.fromTo("#s3tree2", { y: 100, opacity: 0 }, {
      y: 0, opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=5000",
        end: "top+=5750",
        scrub: true
      }
    });
    gsap.fromTo("#s3tree1", { y: 100, opacity: 0 }, {
      y: 0, opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=5000",
        end: "top+=5750",
        scrub: true
      }
    });
    gsap.fromTo("#s3handstiff", { y: 100, opacity: 0 }, {
      y: 0, opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=5000",
        end: "top+=5750",
        scrub: true
      }
    });


    ["#s3tree1", "#s3tree2", "#s3handstiff"].forEach(id => {
      gsap.to(id, {
        y: 0,
        opacity: 1,
        scrollTrigger: {
          trigger: "#scene",
          start: "top+=5751", // ngay sau khi fade-in xong
          end: "top+=8000",   // ƒë·∫øn l√∫c b·∫Øt ƒë·∫ßu fade-out
          scrub: false,
          immediateRender: false
        }
      });
    });


    gsap.fromTo("#s3hero", { x: -500, scale: 0.5, opacity: 0 }, {
      x: 0,
      opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=5000",
        end: "top+=5750",
        scrub: true
      }
    });

    gsap.fromTo("#s3enemy", { y: "100%", x: "20%", scale: 0.4, opacity: 0 }, {
      y: "0%", x: "0%", scale: 0.66, opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=5750",
        end: "top+=6000",
        scrub: true
      }
    });
    gsap.fromTo("#s3Text1", { y: -100, opacity: 0 }, {
      y: 0, opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=5800",
        end: "top+=6000",
        scrub: true
      }
    });

    gsap.fromTo("#s3hero",
      { x: 0, scale: 1, opacity: 1 }, // tr·∫°ng th√°i k·∫øt th√∫c Part 1
      {
        x: 100, // ƒëi ti·∫øp
        scale: 1,
        opacity: 1,
        // immediateRender: false, // üî• quan tr·ªçng
        scrollTrigger: {
          trigger: "#scene",
          start: "top+=6500",
          end: "top+=6750",
          scrub: true
        }
      });


    gsap.fromTo("#s3enemy",
      { x: 0, scale: 0.66, opacity: 1 }, // tr·∫°ng th√°i cu·ªëi Part 1
      {
        x: 0,
        scale: 1,
        opacity: 1,
        // immediateRender: false,
        scrollTrigger: {
          trigger: "#scene",
          start: "top+=6500",
          end: "top+=6750",
          scrub: true
        }
      });


    gsap.to("#s3Text1", {
      y: -300,
      opacity: 0,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=6500",
        end: "top+=6750",
        scrub: true
      }
    });

    gsap.fromTo("#s3Text2a", { y: 100, opacity: 0 }, {
      y: 0, opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=6700",
        end: "top+=7000",
        scrub: true
      }
    });
    gsap.fromTo("#s3Text2b", { y: -100, opacity: 0 }, {
      y: 0, opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=6700",
        end: "top+=7000",
        scrub: true
      }
    });
    gsap.to("#s3Text2a", {
      opacity: 0,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=7000",
        end: "top+=7250",
        scrub: true
      }
    });
    gsap.to("#s3Text2b", {
      opacity: 0,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=7000",
        end: "top+=7250",
        scrub: true
      }
    });

    // === SCENE 3 - PART 3: Text3a + 3b, hand xoay, fade out (7500 ‚Üí 8500) ===
    gsap.fromTo("#s3Text3b", { opacity: 0 }, {
      opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=7500",
        end: "top+=7750",
        scrub: true
      }
    });
    gsap.fromTo("#s3Text3a", { opacity: 0 }, {
      opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=7500",
        end: "top+=7750",
        scrub: true
      }
    });


    gsap.fromTo("#s3hero",
      { x: "10vw", scale: 1, opacity: 1 },
      {
        x: "30vw",
        scale: 1,
        opacity: 1,
        immediateRender: false,
        scrollTrigger: {
          trigger: "#scene",
          start: "top+=7500",
          end: "top+=7750",
          scrub: true
        }
      });


    // gsap.fromTo("#s3handstiff",
    //   { x: 100, y: 10, rotation: 0, opacity: 1 },
    //   {
    //     x: 450,
    //     y: 100,
    //     rotation: -31,
    //     opacity: 1,
    //     immediateRender: false,
    //     scrollTrigger: {
    //       trigger: "#scene",
    //       start: "top+=7500",
    //       end: "top+=7750",
    //       scrub: true
    //     }
    //   });

    gsap.fromTo("#s3handstiff",
      { x: "10vw", y: "2vh", rotation: 0, opacity: 1 },
      {
        x: "45vw",
        y: "10vh",

        rotation: -31,
        opacity: 1,
        immediateRender: false,
        scrollTrigger: {
          trigger: "#scene",
          start: "top+=7500",
          end: "top+=7750",
          scrub: true
        }
      });

    gsap.to(
      ".scene3-element, #s3Text1, #s3Text2a, #s3Text2b, #s3Text3a, #s3Text3b, #s3tree1, #s3tree2, #s3handstiff, #s3hero, #s3enemy",
      {
        opacity: 0,
        scrollTrigger: {
          trigger: "#scene",
          start: "top+=8000",
          end: "top+=8500",
          scrub: true
        }
      }
    );


    //--------------------------------------------------------------------SCENE 4-------------------------------------------------------------------------------
    //----------------------------------------------------------------------------------------------------------------------------------------------------------
    // ===== Scene 4: C√°c element scale v·ªÅ 1, text hi·ªán tr√°i/ph·∫£i v√†o =====
    ["#s4men1", "#s4men2", "#s4hero", "#s4sword"].forEach(id => {
      gsap.fromTo(id, { scale: 1.6, opacity: 0 }, {
        scale: 1,
        opacity: 1,
        scrollTrigger: {
          trigger: "#scene",
          start: "top+=8300",
          end: "top+=9500",
          scrub: true
        }
      });
    });

    gsap.fromTo("#s4Text1", { x: 200, opacity: 0 }, {
      x: 0,
      opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=9500",
        end: "top+=10200",
        scrub: true
      }
    });

    gsap.fromTo("#s4Text2", { x: -200, opacity: 0 }, {
      x: 0,
      opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=9800",
        end: "top+=10500",
        scrub: true
      }
    });

    gsap.to(["#s4men1", "#s4men2", "#s4hero", "#s4sword", "#s4Text1", "#s4Text2"], {
      opacity: 0,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=10500",
        end: "top+=11500",
        scrub: true
      }
    });

    //--------------------------------------SCENE 5--------------------------------------------------------------------------------
    // ===== Scene 5: Element t·ª´ tr√°i v√†o gi·ªØa, text t·ª´ ph·∫£i v√†o =====
    ["#s5floor1", "#s5hero", "#s5floor2", "#s5men1", "#s5men2", "#s5men3"].forEach((id, i) => {
      gsap.fromTo(id, { x: -200, opacity: 0 }, {
        x: 0,
        opacity: 1,
        scrollTrigger: {
          trigger: "#scene",
          start: `top+=10500`,
          end: `top+=11500`,
          scrub: true
        }
      });
    });

    gsap.fromTo("#s5Text", { x: 200, opacity: 0 }, {
      x: 0,
      opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=10500",
        end: "top+=11500",
        scrub: true
      }
    });


    gsap.to(".scene5-element, #s5Text, #s5hero, #s5men1, #s5men2, #s5men3, #s5floor1, #s5floor2", {
      opacity: 0,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=11500",
        end: "top+=12500",
        scrub: true
      }
    });

    //--------------------------------------SCENE 6--------------------------------------------------------------------------------
    // ===== Scene 6: Text t·ª´ tr√™n xu·ªëng =====
    ["#s6people1", "#s6people2", "#s6people3", "#s6hero", "#s6sword"].forEach(id => {
      gsap.fromTo(id, { y: 100 }, {
        y: 0,
        opacity: 1,
        scrollTrigger: {
          trigger: "#scene",
          start: "top+=11500",
          end: "top+=12500",
          scrub: true
        }
      });
    });

    gsap.fromTo("#s6Text", { y: -100, opacity: 0 }, {
      y: 0,
      opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=11500",
        end: "top+=12500",
        scrub: true
      }
    });

    gsap.to(".scene6-element, #s6people1, #s6people2, #s6hero, #s6sword", {
      opacity: 0,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=12500",
        end: "top+=13500",
        scrub: true
      }
    });

    gsap.fromTo("#s6Text", { x: 0, opacity: 0 }, {
      x: -2000,
      opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=12500",
        end: "top+=13500",
        scrub: true
      }
    });
    //--------------------------------------SCENE 7--------------------------------------------------------------------------------
    // ===== Scene 7: Part 1 - boat + turtle xu·∫•t hi·ªán, text1 =====
    gsap.fromTo("#s7boat", { x: 2000, opacity: 0 }, {
      x: 1200,
      opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=12500",
        end: "top+=13000",
        scrub: true
      }
    });

    gsap.fromTo("#s7boatsd", { x: 2000, opacity: 0 }, {
      x: 1200,
      opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=12500",
        end: "top+=13000",
        scrub: true
      }
    });

    gsap.fromTo("#s7turtle", { y: 200, opacity: 0 }, {
      y: 0,
      opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=12500",
        end: "top+=13000",
        scrub: true
      }
    });
    gsap.fromTo("#s7turtlesd", { y: -50, opacity: 0 }, {
      y: 0,
      opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=12500",
        end: "top+=13000",
        scrub: true
      }
    });

    gsap.fromTo("#s7Text1", { x: -200, opacity: 0 }, {
      x: 0,
      opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=13000",
        end: "top+=13500",
        scrub: true
      }
    });
    gsap.fromTo("#s7Text2a", { x: 200, opacity: 0 }, {
      x: 0,
      opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=13500",
        end: "top+=14000",
        scrub: true
      }
    });
    // text1, 2a hide
    gsap.fromTo("#s7Text1", { x: 0, opacity: 0 }, {
      x: -2000,
      opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=14000",
        end: "top+=14500",
        scrub: true
      }
    });
    gsap.fromTo("#s7Text2a", { x: 0, opacity: 0 }, {
      x: 2000,
      opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=14000",
        end: "top+=14500",
        scrub: true
      }
    });
    // ===== Scene 7: Part 2 - boat ti·∫øn v√†o gi·ªØa, text2a/b xu·∫•t hi·ªán =====
    gsap.to("#s7boat", {
      x: 0,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=14000",
        end: "top+=14500",
        scrub: true
      }
    });

    gsap.to("#s7boatsd", {
      x: 0,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=14000",
        end: "top+=14500",
        scrub: true
      }
    });



    gsap.fromTo("#s7Text2b", { y: -100, opacity: 0 }, {
      y: 0,
      opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=14000",
        end: "top+=14500",
        scrub: true
      }
    });


    gsap.fromTo("#s7Text3", { x: 200, opacity: 0 }, {
      x: 0,
      opacity: 1,
      scrollTrigger: {
        trigger: "#scene",
        start: "top+=14500",
        end: "top+=15000",
        scrub: true
      }
    });


    ScrollTrigger.create({
      trigger: "#scene",
      start: "top top",
      end: "+=16000",
      pin: true,
      scrub: true
    });

    window.addEventListener("load", () => {
      ScrollTrigger.refresh();
    });







    const translations = {
      vi: {
        title: "S·ª± t√≠ch H·ªì G∆∞∆°m",
        floorText: "V√†o th·ªùi gi·∫∑c Minh x√¢m l∆∞·ª£c n∆∞·ªõc ta, ƒëi ƒë·∫øn ƒë√¢u ch√∫ng c≈©ng t√†n s√°t ng∆∞·ªùi d√¢n v√¥ t·ªôi, c∆∞·ªõp b√≥c c·ªßa c·∫£i c·ªßa nh√¢n d√¢n. Cu·ªôc s·ªëng c·ªßa ng∆∞·ªùi d√¢n v√¥ c√πng c·ª±c kh·ªï, v√† l·∫ßm than.",
        s2Text1: "H·ªìi ·∫•y ·ªü Thanh H√≥a, c√≥ m·ªôt ng∆∞·ªùi ƒëi ƒë√°nh c√° d∆∞·ªõi s√¥ng t√™n l√† L√™ Th·∫≠n, khi k√©o l√™n th·∫•y l∆∞·ªõi r·∫•t n·∫∑ng. Tuy nhi√™n khi l∆∞·ªõi ƒë∆∞·ª£c k√©o l√™n th√¨ kh√¥ng c√≥ m·ªôt con c√° n√†o m√† ch·ªâ l√† m·ªôt l∆∞·ª°i g∆∞∆°m c≈©.",
        s2Text2a: "Anh b√®n quƒÉng l∆∞·ª°i g∆∞∆°m ƒëi xa h∆°n r·ªìi k√©o l∆∞·ªõi l·∫°i nh∆∞ng l·∫ßn 2, l·∫ßn 3 v·∫´n ch·ªâ c√≥ l∆∞·ª°i g∆∞∆°m n√†y m·∫Øc v√†o l∆∞·ªõi.",
        s2Text2b: "Sao v·∫´n l√† l∆∞·ª°i g∆∞∆°m n√†y v·∫≠y??",
        s2Text3: "Kh√¥ng b·∫Øt ƒë∆∞·ª£c c√°. anh ƒë√†nh c·∫ßm l∆∞·ª°i g∆∞∆°m c≈© mang v·ªÅ ƒë·ªÉ trong g√≥c nh√†. Sau ƒë√≥ kh√¥ng l√¢u L√™ Th·∫≠n gia nh·∫≠p nghƒ©a qu√¢n. ƒë∆∞·ª£c L√™ L·ª£i v√¥ c√πng tin t∆∞·ªüng.",
        s3Text1: "Th·ªùi gian sau, L√™ L·ª£i b·ªã qu√¢n gi·∫∑c ƒëu·ªïi theo v√†o trong r·ª´ng s√¢u.",
        s3Text2a: "Khi ƒëang ch·∫°y tr·ªën, √¥ng nh√¨n th·∫•y c√≥ m·ªôt v·∫≠t s√°ng ch√≥i tr√™n c√†nh c√¢y.Nh√¨n kƒ© th√¨ th·∫•y m·ªôt c√°i chu√¥i g∆∞∆°m n·∫°m ng·ªçc s√°ng l·∫•p l√°nh.",
        s3Text2b: "L√† chu√¥i g∆∞∆°m sao?",
        s3Text3a: "Gh√©p v·ªõi l∆∞·ª°i g∆∞∆°m kia th·∫≠t gi·ªëng 1 b·ªô.",
        s3Text3b: "L·∫°i nh·ªõ t·ªõi h√¥m ·ªü nh√† L√™ Th·∫≠n c√≥ l∆∞·ª°i g∆∞∆°m ph√°t s√°ng L√™ L·ª£i li·ªÅn c·∫ßm chu√¥i g∆∞∆°m v·ªÅ.",
        s4Text1: "sau khi gh√©p l∆∞·ª°i g∆∞∆°m v·ªõi chu√¥i g∆∞∆°m th√¨ l·∫°i v·ª´a in nh∆∞ m·ªôt c·∫∑p, l∆∞·ª°i g∆∞∆°m tr·ªü l√™n s√°ng ch√≥i v√† s·∫Øc nh·ªçn v√¥ c√πng",
        s4Text2: "C√≥ l·∫Ω ƒë√¢y l√† g∆∞∆°m b√°u tr·ªùi ban, gi√∫p nghƒ©a qu√¢n ƒë√°nh gi·∫∑c x√¢m l∆∞·ª£c",
        s5Text: "K·ªÉ t·ª´ ƒë√≥, nghƒ©a qu√¢n ƒë√°nh ƒë√¢u th·∫Øng ƒë√≥, trƒÉm tr·∫≠n trƒÉm th·∫Øng. Ch·∫≥ng bao l√¢u sau, d∆∞·ªõi s·ª± l√£nh ƒë·∫°o c·ªßa L√™ L·ª£i v√† nh·ªù g∆∞∆°m th·∫ßn m√† nghƒ©a qu√¢n ƒë√£ ƒë√°nh b·∫°i qu√¢n Minh.",
        s6Text: "Gi·∫∑c s·ª£ h√£i b·ªè th√°o ch·∫°y v·ªÅ ph∆∞∆°ng B·∫Øc, mu√¥n d√¢n l·∫°i ƒë∆∞·ª£c th√°i b√¨nh, L√™ L·ª£i l√™n ng√¥i vua ƒë·ªÉ tr·ªã v√¨ v√† th·ªëng nh·∫•t ƒë·∫•t n∆∞·ªõc",
        s7Text1: "M·ªôt nƒÉm sau, khi nh√† vua c√πng c√°c b·ªÅ t√¥i th√¢n t√≠n ng·ªìi thuy·ªÅn ƒëi d·∫°o tr√™n h·ªì T·∫£ V·ªçng tr∆∞·ªõc kinh th√†nh.Khi thuy·ªÅn ra t·ªõi gi·ªØa h·ªì th√¨ b·∫•t ng·ªù t·ª´ d∆∞·ªõi l√†n n∆∞·ªõc trong xanh, c√≥ m·ªôt con r√πa v√†ng ngoi ƒë·∫ßu l√™n, c·∫•t ti·∫øng:",
        s7Text2a: "Th∆∞a nh√† vua, l√∫c tr∆∞·ªõc ƒê·ª©c Long Qu√¢n c√≥ cho nh√† vua m∆∞·ª£n thanh g∆∞∆°m th·∫ßn ƒë·ªÉ ƒë√°nh gi·∫∑c",
        s7Text2b: " Nay nghi·ªáp l·ªõn ƒë√£ ho√†n th√†nh, xin nh√† vua h√£y tr·∫£ l·∫°i g∆∞∆°m th·∫ßn!",
        s7Text3: "L√™ L·ª£i nghe xong, li·ªÅn c·ªüi thanh g∆∞∆°m b√™n m√¨nh ra, c·∫ßm hai tay v√† d√¢ng l√™n tr∆∞·ªõc m·∫∑t r√πa v√†ng."


      },
      en: {
        title: "The Legend of Hoan Kiem Lake",
        floorText: "In the era when the Ming invaders ravaged our country, wherever they went, they massacred innocent people and plundered their property. The lives of the people were utterly miserable and full of suffering.",
        s2Text1: "Back then in Thanh Hoa, there was a fisherman named Le Than. When he pulled up his net, it felt very heavy. However, when the net was fully pulled up, there were no fish, only an old sword blade.",
        s2Text2a: "He threw the sword blade far away and cast his net again, but the second and third times, only this same sword blade got caught in his net.",
        s2Text2b: "Why is it still this sword blade??",
        s2Text3: "Unable to catch any fish, he reluctantly took the old sword blade home and placed it in a corner. Not long after, Le Than joined the resistance army and was greatly trusted by Le Loi.",
        s3Text1: "Some time later, Le Loi was pursued by enemy troops deep into the forest.",
        s3Text2a: "While escaping, he saw a shining object on a tree branch. Looking closely, he saw a sword hilt inlaid with glittering gems.",
        s3Text2b: "Is that a sword hilt?",
        s3Text3a: "It fits perfectly with that sword blade, like a set.",
        s3Text3b: "Remembering the glowing sword blade at Le Than's house, Le Loi immediately took the sword hilt with him.",
        s4Text1: "After combining the sword blade with the hilt, they fit together perfectly as a single piece. The sword blade became dazzlingly bright and incredibly sharp.",
        s4Text2: "Perhaps this is a precious sword granted by heaven, to help our army defeat the invaders.",
        s5Text: "From then on, the resistance army was victorious wherever they went, winning every battle. Before long, under the leadership of Le Loi and thanks to the magic sword, the army defeated the Ming invaders.",
        s6Text: "The invaders, terrified, fled back to the North, and the people enjoyed peace once more. Le Loi ascended the throne to rule and unify the country.",
        s7Text1: "A year later, as the King and his trusted mandarins were boating on Ho Ta Vong (West Lake) in front of the capital city. As the boat reached the middle of the lake, suddenly, from the clear blue water, a golden turtle emerged, speaking:",
        s7Text2a: "Your Majesty, previously, the Dragon King lent Your Majesty this divine sword to defeat the invaders.",
        s7Text2b: "Now that the great task is complete, please return the divine sword!",
        s7Text3: "Upon hearing this, Le Loi immediately took off the sword from his side, held it with both hands, and presented it to the golden turtle."


      },
      fr: {
        title: "La L√©gende du Lac de l‚Äô√âp√©e",
        floorText: "Il √©tait une fois un roi...",
      }
    };



    /////////////////////////////auto scroll///////////////////////////////////////////////////

    let scrolling = false;
    let scrollInterval = null;

    document.getElementById("autoScrollBtn").addEventListener("click", () => {
      scrolling = !scrolling;

      const btn = document.getElementById("autoScrollBtn");
      btn.textContent = scrolling ? "Stop" : "Auto";

      if (scrolling) {
        scrollInterval = setInterval(() => {
          window.scrollBy(0, 1);
          if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight) {
            clearInterval(scrollInterval);
            btn.textContent = "Auto Scroll";
            scrolling = false;
          }
        }, 16);
      } else {
        clearInterval(scrollInterval);
      }
    });

    ////////////////////////////////////////////////////////////////////////////////////////////////


    document.addEventListener("DOMContentLoaded", () => {
      const scrollTop = window.scrollY || document.documentElement.scrollTop;

      // N·∫øu ƒëang ·ªü ƒë·∫ßu trang
      if (scrollTop === 0) {
        const idsToHideTemporarily = [
          '#s3tree1', '#s3tree2', '#s3hero', '#s3enemy',
          '#s3handstiff', '#s3Text1', '#s3Text2a', '#s3Text2b', '#s3Text3a', '#s3Text3b', '#house1', '#house2', '#enemy1', '#enemy2', '#fire', '#floor'
        ];

        idsToHideTemporarily.forEach(selector => {
          const el = document.querySelector(selector);
          if (el) el.style.opacity = '0';
        });

        // Kick GSAP refresh ngay sau ƒë√≥
        setTimeout(() => {
          idsToHideTemporarily.forEach(selector => {
            const el = document.querySelector(selector);
            if (el) el.style.opacity = ''; // Tr·∫£ v·ªÅ tr·∫°ng th√°i b√¨nh th∆∞·ªùng ƒë·ªÉ GSAP x·ª≠ l√Ω l·∫°i
          });
          ScrollTrigger.refresh(); // üí• ƒê·∫©y l·∫°i to√†n b·ªô tr·∫°ng th√°i
        }, 50);
      }






      const btn = document.getElementById("unlock-btn");
      const bgMusic = document.getElementById("bg-music");
      let audioEnabled = false;
      let currentPlaying = null;

      const audios = [
        { id: "audio-intro", start: 0, end: 300 },
        { id: "audio-scene1", start: 400, end: 2000 },
        { id: "audio-scene2p1", start: 2000, end: 3500 },
        { id: "audio-scene2p2", start: 3500, end: 4500 },
        { id: "audio-scene2p3", start: 4500, end: 5500 },
        { id: "audio-scene3p1", start: 5500, end: 6700 },
        { id: "audio-scene3p2", start: 6700, end: 7500 },
        { id: "audio-scene3p3", start: 7500, end: 8500 },
        { id: "audio-scene4", start: 9500, end: 10500 },
        { id: "audio-scene5", start: 10500, end: 11500 },
        { id: "audio-scene6", start: 11500, end: 12500 },
        { id: "audio-scene7p1", start: 13000, end: 14500 },
        { id: "audio-scene7p2", start: 14500, end: 15500 },
        { id: "audio-ending", start: 15500, end: 16500 }
      ];

      // üëâ T·∫Øt ti·∫øng t·∫•t c·∫£ audio (nh∆∞ng v·∫´n ƒëang ch·∫°y)
      function muteAllAudios() {
        document.querySelectorAll("audio").forEach(a => a.muted = true);
      }

      // üëâ B·∫≠t ti·∫øng t·∫•t c·∫£ audio (kh√¥i ph·ª•c)
      function unmuteAllAudios() {
        document.querySelectorAll("audio").forEach(a => a.muted = false);
      }

      // üîÅ Unlock to√†n b·ªô audio 1 l·∫ßn duy nh·∫•t (play-pause ƒë·ªÉ v∆∞·ª£t ch·∫∑n autoplay)
      async function unlockAllAudioOnce() {
        for (let { id } of audios) {
          const a = document.getElementById(id);
          if (a) {
            try {
              await a.play();
              a.pause(); // kh√¥ng reset th·ªùi gian
            } catch (e) {
              console.warn("Kh√¥ng unlock ƒë∆∞·ª£c:", id, e);
            }
          }
        }
      }

      // üîä Toggle ON / OFF √¢m thanh
      async function toggleAudio() {
        audioEnabled = !audioEnabled;
        btn.textContent = audioEnabled ? "üîä " : "üîá ";

        if (audioEnabled) {
          await unlockAllAudioOnce(); // unlock voice
          unmuteAllAudios(); // b·∫≠t ti·∫øng

          // Ph√°t nh·∫°c n·ªÅn n·∫øu ch∆∞a ch·∫°y
          if (bgMusic && bgMusic.paused) {
            try {
              bgMusic.volume = 0.3;
              await bgMusic.play();
            } catch (e) {
              console.warn("Kh√¥ng ph√°t ƒë∆∞·ª£c nh·∫°c n·ªÅn:", e);
            }
          }

        } else {
          muteAllAudios(); // ch·ªâ t·∫Øt ti·∫øng th√¥i
        }
      }

      btn.addEventListener("click", toggleAudio);

      // üîÅ Theo d√µi scroll ƒë·ªÉ ch·ªçn audio ph√π h·ª£p
      function handleScroll() {
        const scrollTop = window.scrollY;

        for (let { id, start, end } of audios) {
          const audio = document.getElementById(id);
          if (scrollTop >= start && scrollTop < end) {
            if (currentPlaying !== id) {
              // D·ª´ng audio c≈© n·∫øu kh√°c
              if (currentPlaying) {
                const prev = document.getElementById(currentPlaying);
                if (prev && !prev.loop) prev.pause();
              }

              // Ph√°t ƒëo·∫°n m·ªõi
              if (audio) {
                audio.play().catch(e => console.warn("Kh√¥ng play:", e));
                audio.muted = !audioEnabled;
                currentPlaying = id;
              }
            }
            return;
          }
        }

        // Kh√¥ng kh·ªõp ƒëo·∫°n n√†o ‚Üí d·ª´ng voice hi·ªán t·∫°i (kh√¥ng ·∫£nh h∆∞·ªüng bgMusic)
        if (currentPlaying) {
          const prev = document.getElementById(currentPlaying);
          if (prev && !prev.loop) prev.pause();
          currentPlaying = null;
        }
      }

      // G·ªçi ƒë·ªãnh k·ª≥
      setInterval(handleScroll, 200);










      
    const langBtn = document.getElementById("language-btn");
    const langPopup = document.getElementById("language-popup");

    langBtn.addEventListener("click", () => {
      langPopup.style.display = (langPopup.style.display === "none") ? "block" : "none";
    });

    document.querySelectorAll(".lang-option").forEach(btn => {
      btn.addEventListener("click", (e) => {
        const selectedLang = e.target.dataset.lang;
        applyTranslation(selectedLang);
        langPopup.style.display = "none";
      });
    });

    function applyTranslation(lang) {
      const t = translations[lang];
      if (!t) return;

      Object.keys(t).forEach(id => {
        const el = document.getElementById(id);
        if (el) el.textContent = t[id];
      });
    }

    });

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    /////////////////////////////////////////////////////////check xoay ngang doc voi dien thoai////////////////////////////////////////////////////////////////
    function checkOrientation() {
      const isPortrait = window.innerHeight > window.innerWidth;
      const warning = document.getElementById('rotate-warning');
      if (isPortrait && window.innerWidth < 768) {
        warning.style.display = 'flex'; // Hi·ªán c·∫£nh b√°o n·∫øu l√† mobile v√† ƒëang xoay d·ªçc
      } else {
        warning.style.display = 'none'; // ·∫®n c·∫£nh b√°o n·∫øu ƒë√£ xoay ngang
      }
    }

    window.addEventListener("load", checkOrientation);
    window.addEventListener("resize", checkOrientation);
    window.addEventListener("orientationchange", checkOrientation);

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    ///////////////////////////////////////////////////// scroll len dau trang////////////////////////////////////////////////////////////////

    history.scrollRestoration = "manual";
    window.scrollTo(0, 0);

    window.addEventListener("load", () => {
      setTimeout(() => {
        window.scrollTo(0, 0);
        ScrollTrigger.refresh(true); // b·∫Øt bu·ªôc!
      }, 50);
    });


    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////



  </script>

</body>

</html>